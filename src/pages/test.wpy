<style lang='less'>
    .line__chart {
        width: 700rpx;
        height: 600rpx;
        margin: 0 auto;
    }
</style>

<template>
    <view class="line__chart">
        <ec_canvas id="mychart-dom-bar" canvas-id="mychart-bar" ec="{{ ec }}" bind:init="echartInit"></ec_canvas>
    </view>
</template>

<script>
    import wepy from 'wepy'
    import echarts from '../components/ec-canvas/echarts.js'
    export default class LineChart extends wepy.page {
        config = {
            navigationBarTitleText: 'Charts',
            usingComponents: {
                ec_canvas: '../components/ec-canvas/ec-canvas'
            }
        }
        data = {
            ec: {},
            dataList : [7, 6, 9, 2, 5, 6]
        }
        methods = {
            echartInit(e) {
                console.log('from echartInit')
                console.log(e)
                this.initChart(e.detail.canvas, e.detail.width, e.detail.height)
            }
        }
        initChart(canvas, width, height) {
            const chart = echarts.init(canvas, null, {
                width: width,
                height: height
            })
            canvas.setChart(chart)
            var option = {
                xAxis: {
                    type: 'category',
                    data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']
                },
                yAxis: {
                    type: 'value'
                },
                series: [{
                    data: this.dataList,
                    type: 'line'
                }]
            }
            chart.setOption(option)
            return chart
        }
    }
</script>

